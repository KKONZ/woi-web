{% extends "wrappers/wrapper.html" %}

{% block title %}Season Series Statistics{% endblock %}

{% block content_header %}
    <h1 class="text-center">Season Series Comparison</h1>
{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-12">
        {% from "_formhelpers.html" import render_field %}
        <form class="table-opts" method="post" action="/game/series/">
            {{ csrf_token }}
            <div class="row">
                <div class="col-sm-3">
                {{ render_field(form.season) }}
                </div>
                <div class="col-sm-3">
                {{ render_field(form.team1) }}
                </div>
                <div class="col-sm-3">
                {{ render_field(form.teamstrengths) }}
                </div>
                <div class="col-sm-3">
                {{ render_field(form.tablecolumns) }}
                </div>
            </div>
            <div class="row">
                <div class="col-sm-3">
                    {{ render_field(form.session) }}
                </div>
                <div class="col-sm-3">
                    {{ render_field(form.team2) }}
                </div>
                <div class="col-sm-3">
                    {{ render_field(form.scoresituations) }}
                </div>
                <div class="col-sm-3">
                    {{ render_field(form.period) }}
                </div>
            </div>
            <div class="row">
                <div class="col-md-3 col-md-offset-9">
                    <button type="submit" class="btn btn-primary center-block beside-fields">Submit</button>
                </div>
            </div>
        </form>
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <ul id="main-content-tab-container" class="nav nav-tabs" role="tablist">
            <li role="presentation" class="active"><a href="#event-tables">Event Tables</a></li>
            <li role="presentation"><a href="#h2h">Head-To-Head Matchups</a></li>
            <li role="presentation"><a href="#event-charts">Event Charts</a></li>
        </ul><div id="event-tables" class="tab-pane fade in active">
            <h3>Teams</h3>
            <div class="row datatable">
                <div class="col-sm-12">
                    <table class="table dataTable table-striped no-footer nowrap" role="grid" cellspacing="0" width="100%" style="width: 100%;">
                        <thead>
                            <tr>
                                <th>Team</th>
                                <th>GF</th>
                                <th>SF</th>
                                <th>MSF</th>
                                <th>BSF</th>
                                <th>CF</th>
                                <th>SCF</th>
                                <th>HSCF</th>
                                <th>ZSO</th>
                                <th>HIT</th>
                                <th>PN</th>
                                <th>FO_W</th>
                                <th>TOI</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for teamrun in teamrun %}
                            <tr>
                                <td><img alt="{{ teamrun["Team"] }} Logo" src="{{ url_for('static', filename='img/team/' + teamrun["Team"] + '.png') }}" height="20" width="20"/>{{ teamrun["Team"]|teamshortname }}</td>
                                <td>{{ teamrun["GF"] }}</td>
                                <td>{{ teamrun["SF"]|int }}</td>
                                <td>{{ teamrun["MSF"]|int }}</td>
                                <td>{{ teamrun["BSF"]|int }}</td>
                                <td>{{ teamrun["CF"]|int }}</td>
                                <td>{{ teamrun["SCF"] }}</td>
                                <td>{{ teamrun["sSCF"] }}</td>
                                <td>{{ teamrun["ZSO"] }}</td>
                                <td>{{ teamrun["HIT"] }}</td>
                                <td>{{ teamrun["PENL_TAKEN"] }}</td>
                                <td>{{ teamrun["FAC_WIN"] }}</td>
                                <td>{{ teamrun["TOI"]|calc_toi }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>

                </div>
            </div>
            <h3>Goalies</h3>
            <div class="row datatable">
                <div class="col-sm-12">
                    <table class="table dataTable hover stripe order-column no-footer nowrap" role="grid" cellspacing="0" width="100%" style="width: 100%;">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Team</th>
                                <th>Gm</th>
                                <th>GU</th>
                                <th>SU</th>
                                <th>G.L</th>
                                <th>S.L</th>
                                <th>G.M</th>
                                <th>S.M</th>
                                <th>G.H</th>
                                <th>S.H</th>
                                <th>TOI</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for goalie in goalies %}
                            <tr>
                                <td>{{ woiid[goalie["ID"]].full_name }}</td>
                                <td><img alt="{{ goalie["Team"] }} Logo" src="{{ url_for('static', filename='img/team/' + goalie["Team"] + '.png') }}" height="20" width="20"/>{{ goalie["Team"]|teamshortname }}</td>
                                <td>{{ goalie["Gm"] }}</td>
                                <td>{{ goalie["gu"] }}</td>
                                <td>{{ goalie["su"] }}</td>
                                <td>{{ goalie["gl"] }}</td>
                                <td>{{ goalie["sl"] }}</td>
                                <td>{{ goalie["gm"] }}</td>
                                <td>{{ goalie["sm"] }}</td>
                                <td>{{ goalie["gh"] }}</td>
                                <td>{{ goalie["sh"] }}</td>
                                <td>{{ goalie["TOI"]|calc_toi }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>

                </div>
            </div>
            {% with team=away, teamname=away[0].Team %}
                {% include "game/playertable.html" %}
            {% endwith %}
            {% with team=home, teamname=home[0].Team %}
                {% include "game/playertable.html" %}
            {% endwith %}
        </div>
        <div id="h2h" class="tab-content">

        </div>
        <div id="event-charts" class="tab-content">

        </div>
    </div>
</div>
{% endblock %}

{% block page_js %}
<script type="text/javascript">
$(document).ready(function() {
    // Handle tabs
    $('.nav-tabs a').click(function(){
        $(this).tab('show');
    });
    $('thead').each(function(d, v) {
        $(v).find("th:last").addClass("right-rounded");
        $(v).find("th:first").addClass("left-rounded");
    });
    $('table.dataTable').DataTable({
        "paging": false,
        "filter": false,
        "sDom": '<"top">rt<"bottom"flp><"clear">',
        "scrollX": true,
        "fixedColumns": true,
        //"scrollY": 300,
    });
});
</script>
{% endblock %}

